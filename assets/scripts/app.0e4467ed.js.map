{"version":3,"sources":["frame.ts","events.ts","../../src/lang/en_US.ts","../../src/lang/zh_CN.ts","../src/register.ts","../../src/utils/date.ts","../src/format.ts","../../src/utils/dom.ts","../src/realtime.ts","../src/index.ts","../node_modules/medium-zoom/dist/medium-zoom.esm.js","links.ts","../node_modules/debounce/index.js","scroller.ts","images.ts","pagination.ts","app.ts"],"names":["mediumZoom","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","isSupported","node","tagName","isNodeList","selector","NodeList","isPrototypeOf","isNode","nodeType","isSvg","image","currentSrc","src","substr","toLowerCase","getImagesFromSelector","Array","isArray","filter","slice","document","querySelectorAll","err","TypeError","createOverlay","background","overlay","createElement","classList","add","style","cloneTarget","template","_template$getBounding","getBoundingClientRect","top","left","width","height","clone","cloneNode","scrollTop","window","pageYOffset","documentElement","body","scrollLeft","pageXOffset","removeAttribute","position","transform","createCustomEvent","type","params","eventParams","bubbles","cancelable","detail","undefined","CustomEvent","customEvent","createEvent","initCustomEvent","options","Promise","fn","noop","attach","_len","selectors","_key","newImages","reduce","imagesAccumulator","currentSelector","concat","zoom","newImage","images","indexOf","forEach","push","eventListeners","_ref","listener","addEventListener","open","_ref2","_animate","container","clientWidth","clientHeight","right","bottom","viewportWidth","viewportHeight","zoomOptions","margin","zoomContainer","_zoomContainer$getBou","querySelector","_width","_height","_left","_top","zoomTarget","active","zoomedHd","original","naturalWidth","naturalHeight","_zoomTarget$getBoundi","scaleX","Math","min","scaleY","scale","zoomed","resolve","_images","dispatchEvent","isAnimating","appendChild","content","requestAnimationFrame","close","_handleOpenEnd","removeEventListener","getAttribute","onerror","clearInterval","getZoomTargetSize","console","warn","setInterval","complete","hasAttribute","loadEventListener","remove","transition","opacity","_handleCloseEnd","removeChild","toggle","_ref3","toString","scrollOffset","event","keyCode","currentScroll","abs","setTimeout","update","newOptions","detach","_len2","_key2","imagesToDetach","on","off","eventListener","getOptions","getImages","getZoomedImage","styleInject","css","ref","insertAt","head","getElementsByTagName","firstChild","insertBefore","styleSheet","cssText","createTextNode"],"mappings":"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","file":"app.0e4467ed.js","sourceRoot":"../scripts","sourcesContent":["/**\n * Returns whether this webpage is open in an iframe\n */\nexport const inIframe = () => {\n  try {\n    return window.self !== window.top;\n  } catch (error) {\n    return true;\n  }\n};\n","export const ready = (readyFunction: any) => {\n  if (document.readyState !== \"loading\") {\n    readyFunction();\n  } else if (document.addEventListener) {\n    document.addEventListener(\"DOMContentLoaded\", readyFunction);\n  } else {\n    (document as any).attachEvent(\"onreadystatechange\", () => {\n      if (document.readyState !== \"loading\") readyFunction();\n    });\n  }\n};\n\nexport const updateStorage = () =>\n  localStorage.setItem(\n    \"theme\",\n    document.documentElement.classList.contains(\"dark\") ? \"dark\" : \"light\"\n  );\n\nexport const updateText = (toggleButton: HTMLButtonElement) => {\n  if (toggleButton) {\n    toggleButton.setAttribute(\n      \"aria-label\",\n      document.documentElement.classList.contains(\"dark\")\n        ? \"Change theme to light\"\n        : \"Change theme to dark\"\n    );\n    toggleButton.setAttribute(\n      \"title\",\n      document.documentElement.classList.contains(\"dark\")\n        ? \"Change theme to light\"\n        : \"Change theme to dark\"\n    );\n  }\n};\n",null,null,null,null,null,null,null,null,"/*! medium-zoom 1.0.6 | MIT License | https://github.com/francoischalifour/medium-zoom */\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar isSupported = function isSupported(node) {\n  return node.tagName === 'IMG';\n};\n\n/* eslint-disable-next-line no-prototype-builtins */\nvar isNodeList = function isNodeList(selector) {\n  return NodeList.prototype.isPrototypeOf(selector);\n};\n\nvar isNode = function isNode(selector) {\n  return selector && selector.nodeType === 1;\n};\n\nvar isSvg = function isSvg(image) {\n  var source = image.currentSrc || image.src;\n  return source.substr(-4).toLowerCase() === '.svg';\n};\n\nvar getImagesFromSelector = function getImagesFromSelector(selector) {\n  try {\n    if (Array.isArray(selector)) {\n      return selector.filter(isSupported);\n    }\n\n    if (isNodeList(selector)) {\n      // Do not use spread operator or Array.from() for IE support\n      return [].slice.call(selector).filter(isSupported);\n    }\n\n    if (isNode(selector)) {\n      return [selector].filter(isSupported);\n    }\n\n    if (typeof selector === 'string') {\n      // Do not use spread operator or Array.from() for IE support\n      return [].slice.call(document.querySelectorAll(selector)).filter(isSupported);\n    }\n\n    return [];\n  } catch (err) {\n    throw new TypeError('The provided selector is invalid.\\n' + 'Expects a CSS selector, a Node element, a NodeList or an array.\\n' + 'See: https://github.com/francoischalifour/medium-zoom');\n  }\n};\n\nvar createOverlay = function createOverlay(background) {\n  var overlay = document.createElement('div');\n  overlay.classList.add('medium-zoom-overlay');\n  overlay.style.background = background;\n\n  return overlay;\n};\n\nvar cloneTarget = function cloneTarget(template) {\n  var _template$getBounding = template.getBoundingClientRect(),\n      top = _template$getBounding.top,\n      left = _template$getBounding.left,\n      width = _template$getBounding.width,\n      height = _template$getBounding.height;\n\n  var clone = template.cloneNode();\n  var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n  var scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0;\n\n  clone.removeAttribute('id');\n  clone.style.position = 'absolute';\n  clone.style.top = top + scrollTop + 'px';\n  clone.style.left = left + scrollLeft + 'px';\n  clone.style.width = width + 'px';\n  clone.style.height = height + 'px';\n  clone.style.transform = '';\n\n  return clone;\n};\n\nvar createCustomEvent = function createCustomEvent(type, params) {\n  var eventParams = _extends({\n    bubbles: false,\n    cancelable: false,\n    detail: undefined\n  }, params);\n\n  if (typeof window.CustomEvent === 'function') {\n    return new CustomEvent(type, eventParams);\n  }\n\n  var customEvent = document.createEvent('CustomEvent');\n  customEvent.initCustomEvent(type, eventParams.bubbles, eventParams.cancelable, eventParams.detail);\n\n  return customEvent;\n};\n\nvar mediumZoom = function mediumZoom(selector) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  /**\n   * Ensure the compatibility with IE11 if no Promise polyfill are used.\n   */\n  var Promise = window.Promise || function Promise(fn) {\n    function noop() {}\n    fn(noop, noop);\n  };\n\n  var _handleClick = function _handleClick(event) {\n    var target = event.target;\n\n\n    if (target === overlay) {\n      close();\n      return;\n    }\n\n    if (images.indexOf(target) === -1) {\n      return;\n    }\n\n    toggle({ target: target });\n  };\n\n  var _handleScroll = function _handleScroll() {\n    if (isAnimating || !active.original) {\n      return;\n    }\n\n    var currentScroll = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n\n    if (Math.abs(scrollTop - currentScroll) > zoomOptions.scrollOffset) {\n      setTimeout(close, 150);\n    }\n  };\n\n  var _handleKeyUp = function _handleKeyUp(event) {\n    var key = event.key || event.keyCode;\n\n    // Close if escape key is pressed\n    if (key === 'Escape' || key === 'Esc' || key === 27) {\n      close();\n    }\n  };\n\n  var update = function update() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    var newOptions = options;\n\n    if (options.background) {\n      overlay.style.background = options.background;\n    }\n\n    if (options.container && options.container instanceof Object) {\n      newOptions.container = _extends({}, zoomOptions.container, options.container);\n    }\n\n    if (options.template) {\n      var template = isNode(options.template) ? options.template : document.querySelector(options.template);\n\n      newOptions.template = template;\n    }\n\n    zoomOptions = _extends({}, zoomOptions, newOptions);\n\n    images.forEach(function (image) {\n      image.dispatchEvent(createCustomEvent('medium-zoom:update', {\n        detail: { zoom: zoom }\n      }));\n    });\n\n    return zoom;\n  };\n\n  var clone = function clone() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return mediumZoom(_extends({}, zoomOptions, options));\n  };\n\n  var attach = function attach() {\n    for (var _len = arguments.length, selectors = Array(_len), _key = 0; _key < _len; _key++) {\n      selectors[_key] = arguments[_key];\n    }\n\n    var newImages = selectors.reduce(function (imagesAccumulator, currentSelector) {\n      return [].concat(imagesAccumulator, getImagesFromSelector(currentSelector));\n    }, []);\n\n    newImages.filter(function (newImage) {\n      return images.indexOf(newImage) === -1;\n    }).forEach(function (newImage) {\n      images.push(newImage);\n      newImage.classList.add('medium-zoom-image');\n    });\n\n    eventListeners.forEach(function (_ref) {\n      var type = _ref.type,\n          listener = _ref.listener,\n          options = _ref.options;\n\n      newImages.forEach(function (image) {\n        image.addEventListener(type, listener, options);\n      });\n    });\n\n    return zoom;\n  };\n\n  var detach = function detach() {\n    for (var _len2 = arguments.length, selectors = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      selectors[_key2] = arguments[_key2];\n    }\n\n    if (active.zoomed) {\n      close();\n    }\n\n    var imagesToDetach = selectors.length > 0 ? selectors.reduce(function (imagesAccumulator, currentSelector) {\n      return [].concat(imagesAccumulator, getImagesFromSelector(currentSelector));\n    }, []) : images;\n\n    imagesToDetach.forEach(function (image) {\n      image.classList.remove('medium-zoom-image');\n      image.dispatchEvent(createCustomEvent('medium-zoom:detach', {\n        detail: { zoom: zoom }\n      }));\n    });\n\n    images = images.filter(function (image) {\n      return imagesToDetach.indexOf(image) === -1;\n    });\n\n    return zoom;\n  };\n\n  var on = function on(type, listener) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    images.forEach(function (image) {\n      image.addEventListener('medium-zoom:' + type, listener, options);\n    });\n\n    eventListeners.push({ type: 'medium-zoom:' + type, listener: listener, options: options });\n\n    return zoom;\n  };\n\n  var off = function off(type, listener) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    images.forEach(function (image) {\n      image.removeEventListener('medium-zoom:' + type, listener, options);\n    });\n\n    eventListeners = eventListeners.filter(function (eventListener) {\n      return !(eventListener.type === 'medium-zoom:' + type && eventListener.listener.toString() === listener.toString());\n    });\n\n    return zoom;\n  };\n\n  var open = function open() {\n    var _ref2 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        target = _ref2.target;\n\n    var _animate = function _animate() {\n      var container = {\n        width: document.documentElement.clientWidth,\n        height: document.documentElement.clientHeight,\n        left: 0,\n        top: 0,\n        right: 0,\n        bottom: 0\n      };\n      var viewportWidth = void 0;\n      var viewportHeight = void 0;\n\n      if (zoomOptions.container) {\n        if (zoomOptions.container instanceof Object) {\n          // The container is given as an object with properties like width, height, left, top\n          container = _extends({}, container, zoomOptions.container);\n\n          // We need to adjust custom options like container.right or container.bottom\n          viewportWidth = container.width - container.left - container.right - zoomOptions.margin * 2;\n          viewportHeight = container.height - container.top - container.bottom - zoomOptions.margin * 2;\n        } else {\n          // The container is given as an element\n          var zoomContainer = isNode(zoomOptions.container) ? zoomOptions.container : document.querySelector(zoomOptions.container);\n\n          var _zoomContainer$getBou = zoomContainer.getBoundingClientRect(),\n              _width = _zoomContainer$getBou.width,\n              _height = _zoomContainer$getBou.height,\n              _left = _zoomContainer$getBou.left,\n              _top = _zoomContainer$getBou.top;\n\n          container = _extends({}, container, {\n            width: _width,\n            height: _height,\n            left: _left,\n            top: _top\n          });\n        }\n      }\n\n      viewportWidth = viewportWidth || container.width - zoomOptions.margin * 2;\n      viewportHeight = viewportHeight || container.height - zoomOptions.margin * 2;\n\n      var zoomTarget = active.zoomedHd || active.original;\n      var naturalWidth = isSvg(zoomTarget) ? viewportWidth : zoomTarget.naturalWidth || viewportWidth;\n      var naturalHeight = isSvg(zoomTarget) ? viewportHeight : zoomTarget.naturalHeight || viewportHeight;\n\n      var _zoomTarget$getBoundi = zoomTarget.getBoundingClientRect(),\n          top = _zoomTarget$getBoundi.top,\n          left = _zoomTarget$getBoundi.left,\n          width = _zoomTarget$getBoundi.width,\n          height = _zoomTarget$getBoundi.height;\n\n      var scaleX = Math.min(naturalWidth, viewportWidth) / width;\n      var scaleY = Math.min(naturalHeight, viewportHeight) / height;\n      var scale = Math.min(scaleX, scaleY);\n      var translateX = (-left + (viewportWidth - width) / 2 + zoomOptions.margin + container.left) / scale;\n      var translateY = (-top + (viewportHeight - height) / 2 + zoomOptions.margin + container.top) / scale;\n      var transform = 'scale(' + scale + ') translate3d(' + translateX + 'px, ' + translateY + 'px, 0)';\n\n      active.zoomed.style.transform = transform;\n\n      if (active.zoomedHd) {\n        active.zoomedHd.style.transform = transform;\n      }\n    };\n\n    return new Promise(function (resolve) {\n      if (target && images.indexOf(target) === -1) {\n        resolve(zoom);\n        return;\n      }\n\n      var _handleOpenEnd = function _handleOpenEnd() {\n        isAnimating = false;\n        active.zoomed.removeEventListener('transitionend', _handleOpenEnd);\n        active.original.dispatchEvent(createCustomEvent('medium-zoom:opened', {\n          detail: { zoom: zoom }\n        }));\n\n        resolve(zoom);\n      };\n\n      if (active.zoomed) {\n        resolve(zoom);\n        return;\n      }\n\n      if (target) {\n        // The zoom was triggered manually via a click\n        active.original = target;\n      } else if (images.length > 0) {\nvar _images = images;\n        active.original = _images[0];\n      } else {\n        resolve(zoom);\n        return;\n      }\n\n      active.original.dispatchEvent(createCustomEvent('medium-zoom:open', {\n        detail: { zoom: zoom }\n      }));\n\n      scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n      isAnimating = true;\n      active.zoomed = cloneTarget(active.original);\n\n      document.body.appendChild(overlay);\n\n      if (zoomOptions.template) {\n        var template = isNode(zoomOptions.template) ? zoomOptions.template : document.querySelector(zoomOptions.template);\n        active.template = document.createElement('div');\n        active.template.appendChild(template.content.cloneNode(true));\n\n        document.body.appendChild(active.template);\n      }\n\n      document.body.appendChild(active.zoomed);\n\n      window.requestAnimationFrame(function () {\n        document.body.classList.add('medium-zoom--opened');\n      });\n\n      active.original.classList.add('medium-zoom-image--hidden');\n      active.zoomed.classList.add('medium-zoom-image--opened');\n\n      active.zoomed.addEventListener('click', close);\n      active.zoomed.addEventListener('transitionend', _handleOpenEnd);\n\n      if (active.original.getAttribute('data-zoom-src')) {\n        active.zoomedHd = active.zoomed.cloneNode();\n\n        // Reset the `scrset` property or the HD image won't load.\n        active.zoomedHd.removeAttribute('srcset');\n        active.zoomedHd.removeAttribute('sizes');\n\n        active.zoomedHd.src = active.zoomed.getAttribute('data-zoom-src');\n\n        active.zoomedHd.onerror = function () {\n          clearInterval(getZoomTargetSize);\n          console.warn('Unable to reach the zoom image target ' + active.zoomedHd.src);\n          active.zoomedHd = null;\n          _animate();\n        };\n\n        // We need to access the natural size of the full HD\n        // target as fast as possible to compute the animation.\n        var getZoomTargetSize = setInterval(function () {\n          if ( active.zoomedHd.complete) {\n            clearInterval(getZoomTargetSize);\n            active.zoomedHd.classList.add('medium-zoom-image--opened');\n            active.zoomedHd.addEventListener('click', close);\n            document.body.appendChild(active.zoomedHd);\n            _animate();\n          }\n        }, 10);\n      } else if (active.original.hasAttribute('srcset')) {\n        // If an image has a `srcset` attribuet, we don't know the dimensions of the\n        // zoomed (HD) image (like when `data-zoom-src` is specified).\n        // Therefore the approach is quite similar.\n        active.zoomedHd = active.zoomed.cloneNode();\n\n        // Resetting the sizes attribute tells the browser to load the\n        // image best fitting the current viewport size, respecting the `srcset`.\n        active.zoomedHd.removeAttribute('sizes');\n\n        // In Firefox, the `loading` attribute needs to be set to `eager` (default\n        // value) for the load event to be fired.\n        active.zoomedHd.removeAttribute('loading');\n\n        // Wait for the load event of the hd image. This will fire if the image\n        // is already cached.\n        var loadEventListener = active.zoomedHd.addEventListener('load', function () {\n          active.zoomedHd.removeEventListener('load', loadEventListener);\n          active.zoomedHd.classList.add('medium-zoom-image--opened');\n          active.zoomedHd.addEventListener('click', close);\n          document.body.appendChild(active.zoomedHd);\n          _animate();\n        });\n      } else {\n        _animate();\n      }\n    });\n  };\n\n  var close = function close() {\n    return new Promise(function (resolve) {\n      if (isAnimating || !active.original) {\n        resolve(zoom);\n        return;\n      }\n\n      var _handleCloseEnd = function _handleCloseEnd() {\n        active.original.classList.remove('medium-zoom-image--hidden');\n        document.body.removeChild(active.zoomed);\n        if (active.zoomedHd) {\n          document.body.removeChild(active.zoomedHd);\n        }\n        document.body.removeChild(overlay);\n        active.zoomed.classList.remove('medium-zoom-image--opened');\n        if (active.template) {\n          document.body.removeChild(active.template);\n        }\n\n        isAnimating = false;\n        active.zoomed.removeEventListener('transitionend', _handleCloseEnd);\n\n        active.original.dispatchEvent(createCustomEvent('medium-zoom:closed', {\n          detail: { zoom: zoom }\n        }));\n\n        active.original = null;\n        active.zoomed = null;\n        active.zoomedHd = null;\n        active.template = null;\n\n        resolve(zoom);\n      };\n\n      isAnimating = true;\n      document.body.classList.remove('medium-zoom--opened');\n      active.zoomed.style.transform = '';\n\n      if (active.zoomedHd) {\n        active.zoomedHd.style.transform = '';\n      }\n\n      // Fade out the template so it's not too abrupt\n      if (active.template) {\n        active.template.style.transition = 'opacity 150ms';\n        active.template.style.opacity = 0;\n      }\n\n      active.original.dispatchEvent(createCustomEvent('medium-zoom:close', {\n        detail: { zoom: zoom }\n      }));\n\n      active.zoomed.addEventListener('transitionend', _handleCloseEnd);\n    });\n  };\n\n  var toggle = function toggle() {\n    var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        target = _ref3.target;\n\n    if (active.original) {\n      return close();\n    }\n\n    return open({ target: target });\n  };\n\n  var getOptions = function getOptions() {\n    return zoomOptions;\n  };\n\n  var getImages = function getImages() {\n    return images;\n  };\n\n  var getZoomedImage = function getZoomedImage() {\n    return active.original;\n  };\n\n  var images = [];\n  var eventListeners = [];\n  var isAnimating = false;\n  var scrollTop = 0;\n  var zoomOptions = options;\n  var active = {\n    original: null,\n    zoomed: null,\n    zoomedHd: null,\n    template: null\n\n    // If the selector is omitted, it's replaced by the options\n  };if (Object.prototype.toString.call(selector) === '[object Object]') {\n    zoomOptions = selector;\n  } else if (selector || typeof selector === 'string' // to process empty string as a selector\n  ) {\n      attach(selector);\n    }\n\n  // Apply the default option values\n  zoomOptions = _extends({\n    margin: 0,\n    background: '#fff',\n    scrollOffset: 40,\n    container: null,\n    template: null\n  }, zoomOptions);\n\n  var overlay = createOverlay(zoomOptions.background);\n\n  document.addEventListener('click', _handleClick);\n  document.addEventListener('keyup', _handleKeyUp);\n  document.addEventListener('scroll', _handleScroll);\n  window.addEventListener('resize', close);\n\n  var zoom = {\n    open: open,\n    close: close,\n    toggle: toggle,\n    update: update,\n    clone: clone,\n    attach: attach,\n    detach: detach,\n    on: on,\n    off: off,\n    getOptions: getOptions,\n    getImages: getImages,\n    getZoomedImage: getZoomedImage\n  };\n\n  return zoom;\n};\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css = \".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}\";\nstyleInject(css);\n\nexport default mediumZoom;\n","import { render } from \"timeago.js\";\nimport mediumZoom from \"medium-zoom\";\nimport { updateStorage, updateText } from \"./events\";\n\nexport const setupToggle = () => {\n  const toggleButton = document.querySelector<HTMLButtonElement>(\n    \".theme-toggle\"\n  );\n  if (toggleButton) {\n    toggleButton.addEventListener(\"click\", function () {\n      document.documentElement.classList.toggle(\"dark\");\n      updateStorage();\n      updateText(toggleButton);\n    });\n    updateText(toggleButton);\n  }\n};\n\nexport const setupLinks = () => {\n  const isExternal = (url: string) => {\n    const match = url.match(\n      /^([^:\\/?#]+:)?(?:\\/\\/([^\\/?#]*))?([^?#]+)?(\\?[^#]*)?(#.*)?/\n    );\n    if (2 > match.length) return false;\n    if (\n      typeof match[1] === \"string\" &&\n      match[1].length > 0 &&\n      match[1].toLowerCase() !== location.protocol\n    )\n      return true;\n    if (\n      typeof match[2] === \"string\" &&\n      match[2].length > 0 &&\n      match[2].replace(\n        new RegExp(\n          \":(\" +\n            ({ \"http:\": 80, \"https:\": 443 } as { [index: string]: number })[\n              location.protocol\n            ] +\n            \")?$\"\n        ),\n        \"\"\n      ) !== location.host\n    )\n      return true;\n    return false;\n  };\n\n  const allLinks = document.querySelectorAll(\"a\");\n  const utmParams =\n    \"utm_source=anandchowdhary.com&utm_medium=website&utm_campaign=\" +\n    encodeURIComponent(document.body.className);\n  for (let i = 0; allLinks.length > i; i++) {\n    const link = allLinks[i];\n    const linkHref = link.getAttribute(\"href\");\n    if (isExternal(linkHref)) {\n      if (\n        linkHref.indexOf(\"utm_source\") === -1 &&\n        linkHref.indexOf(\"archive.org\") === -1\n      ) {\n        if (linkHref.indexOf(\"?\") > -1) {\n          link.setAttribute(\"href\", linkHref + \"&\" + utmParams);\n        } else {\n          link.setAttribute(\"href\", linkHref + \"?\" + utmParams);\n        }\n      }\n      link.classList.add(\"external-link\");\n      link.setAttribute(\"target\", \"_blank\");\n      link.setAttribute(\"rel\", \"noopener noreferrer\");\n      link.innerHTML =\n        link.innerHTML + \"<span class='sr-only'> (opens in new window)</span>\";\n    }\n  }\n\n  // Contact page\n  const inputs = document.querySelectorAll<HTMLInputElement>(\n    \"input[name='category']\"\n  );\n  for (let i = 0; i < inputs.length; i++) {\n    inputs[i].addEventListener(\"change\", () => {\n      let value = \"categoryOther\";\n      for (let j = 0; j < inputs.length; j++)\n        if (inputs[j].checked) value = inputs[j].getAttribute(\"id\");\n      const responses = document.querySelectorAll(\".response\");\n      for (let i = 0; i < responses.length; i++)\n        responses[i].setAttribute(\"hidden\", \"hidden\");\n      document\n        .querySelector(\".response.response-\" + value)\n        .removeAttribute(\"hidden\");\n    });\n  }\n\n  // Life page\n  const age = document.querySelector(\".age\");\n  const birthday = new Date(1997, 11, 29).getTime();\n  function updateAge() {\n    const now = new Date().getTime();\n    if (age) age.innerHTML = ((now - birthday) / 31556952000).toFixed(10);\n  }\n  if (age) {\n    setInterval(() => {\n      if (age) updateAge();\n    }, 50);\n    updateAge();\n  }\n\n  // Time ago\n  const timers = document.querySelectorAll(\".time-ago\");\n  if (timers.length) render(timers);\n\n  // Zoomable images\n  const zoomImages = document.querySelectorAll(\n    \".two-images img, .three-images img, .image img:not(.real-image)\"\n  );\n  if (zoomImages.length) mediumZoom(zoomImages);\n};\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","import { debounce } from \"debounce\";\n\nexport const addScrollers = () => {\n  const horizontalScollers = document.querySelectorAll(\".horizontal-scroller\");\n  for (let i = 0; i < horizontalScollers.length; i++) {\n    const scrollable = horizontalScollers[i];\n    const scroller = horizontalScollers[i].querySelector(\"*\");\n    if (!scroller) break;\n    const id = `page_${i}`;\n    const nextPrev = `\n      <div class=\"scroll-buttons\">\n        <button data-prev=\"${id}\">\n          <span class=\"sr-only\">Scroll left</span>\n        </button>\n        <button data-next=\"${id}\">\n          <span class=\"sr-only\">Scroll right</span>\n        </button>\n      </div>\n    `;\n    const scrollBy = scroller.getBoundingClientRect().width;\n    const nextPrevContainer = document.createElement(\"div\");\n    nextPrevContainer.innerHTML = nextPrev;\n    scrollable.appendChild(nextPrevContainer);\n    const next = document.querySelector(`[data-next=\"${id}\"]`);\n    const prev = document.querySelector(`[data-prev=\"${id}\"]`);\n    function updateScroller() {\n      if (next) {\n        if (scroller.scrollLeft + scrollBy >= scroller.scrollWidth) {\n          next.setAttribute(\"hidden\", \"hidden\");\n        } else {\n          next.removeAttribute(\"hidden\");\n        }\n      }\n      if (prev) {\n        if (scroller.scrollLeft === 0) {\n          prev.setAttribute(\"hidden\", \"hidden\");\n        } else {\n          prev.removeAttribute(\"hidden\");\n        }\n      }\n    }\n    updateScroller();\n    scroller.addEventListener(\n      \"scroll\",\n      debounce(function () {\n        updateScroller();\n      }, 250)\n    );\n    if (next) {\n      next.addEventListener(\"click\", function () {\n        const left = scroller.scrollLeft + scrollBy;\n        scroller.scrollTo({\n          top: 0,\n          left,\n          behavior: \"smooth\",\n        });\n      });\n    }\n    if (prev) {\n      prev.addEventListener(\"click\", function () {\n        const left = scroller.scrollLeft - scrollBy;\n        scroller.scrollTo({\n          top: 0,\n          left,\n          behavior: \"smooth\",\n        });\n      });\n    }\n  }\n};\n","export const setupImages = () => {\n  const images = document.querySelectorAll(\"img\");\n  for (let i = 0; i < images.length; i++) {\n    // If weserv is down, use regular url\n    images[i].addEventListener(\"error\", () => {\n      const originalUrl = images[i].getAttribute(\"data-url\");\n      if (originalUrl) images[i].setAttribute(\"src\", originalUrl);\n    });\n  }\n};\n\nexport const checkWebP = (callback: (result: boolean) => any) => {\n  const image = new Image();\n  image.addEventListener(\"load\", () => {\n    if (image.width > 0 && image.height > 0) return callback(true);\n    return callback(false);\n  });\n  image.addEventListener(\"error\", () => callback(false));\n  image.src =\n    \"data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA\";\n};\n\nexport const removeWebP = () => {\n  const images = document.querySelectorAll(\"img\");\n  for (let i = 0; i < images.length; i++) {\n    const currentSource = images[i].getAttribute(\"src\");\n    if (currentSource.includes(\"&output=webp\"))\n      images[i].setAttribute(\"src\", currentSource.replace(\"&output=webp\", \"\"));\n  }\n  const backgrounds = document.querySelectorAll<HTMLDivElement>(\n    `[style*='background']`\n  );\n  for (let i = 0; i < backgrounds.length; i++) {\n    const currentStyle = backgrounds[i].getAttribute(\"style\");\n    if (currentStyle.includes(\"&output=webp\"))\n      backgrounds[i].setAttribute(\n        \"style\",\n        currentStyle.replace(\"&output=webp\", \"\")\n      );\n  }\n};\n\n(window as any).removeWebP = removeWebP;\n","export const infiniteScroll = () => {\n  /**\n   * Progressive engancement: pagination works perfectly in browsers\n   * that don't support IntersectionObserver (or even JavaScript)\n   * but infinite scrolls in browsers that do.\n   */\n  if (\n    \"IntersectionObserver\" in window &&\n    \"fetch\" in window &&\n    \"requestAnimationFrame\" in window\n  ) {\n    const nextPageLink = document.querySelector(\"a.pagination-item--next\");\n    const siblingArticle = document.querySelector(\n      \"main#content section article\"\n    );\n    const appendIn = siblingArticle ? siblingArticle.parentNode : undefined;\n    if (nextPageLink && appendIn) {\n      let tried = false;\n      const observer = new IntersectionObserver(function (entries) {\n        if (tried) return;\n        let intersecting = false;\n        entries.forEach(function (entry) {\n          if (entry.isIntersecting) intersecting = true;\n        });\n        if (intersecting) tried = true;\n        if (!intersecting) return;\n        const span = nextPageLink.querySelector(\"span\");\n        if (span) span.innerHTML = \"Loading more items...\";\n        window\n          .fetch(nextPageLink.getAttribute(\"href\"))\n          .then(function (result) {\n            return result.text();\n          })\n          .then(function (html) {\n            const parser = new DOMParser();\n            const htmlDoc = parser.parseFromString(html, \"text/html\");\n            const results = htmlDoc.querySelectorAll(\n              \"main#content section article\"\n            );\n            for (let i = 0; i < results.length; i++)\n              appendIn.appendChild(results[i]);\n            const newPagination = htmlDoc.querySelector(\n              \"main#content nav.pagination\"\n            );\n            const currentPagination = document.querySelector(\n              \"main#content nav.pagination\"\n            );\n            if (currentPagination && newPagination) {\n              const previousLinkNewPagination = htmlDoc.querySelector(\n                \"a.pagination-item--prev\"\n              );\n              if (previousLinkNewPagination)\n                previousLinkNewPagination.parentNode.removeChild(\n                  previousLinkNewPagination\n                );\n              currentPagination.innerHTML = newPagination.innerHTML;\n              currentPagination.className = newPagination.className;\n              if (\n                !newPagination.querySelectorAll(\"a.pagination-item--next\")\n                  .length\n              )\n                currentPagination.parentNode.removeChild(currentPagination);\n            }\n            window.requestAnimationFrame(infiniteScroll);\n          })\n          .catch(function () {\n            if (span) span.innerHTML = \"Next\";\n          });\n      });\n      observer.observe(nextPageLink);\n    }\n  }\n};\n","import { inIframe } from \"./frame\";\nimport { ready } from \"./events\";\nimport { setupLinks, setupToggle } from \"./links\";\nimport { addScrollers } from \"./scroller\";\nimport { setupImages, checkWebP, removeWebP } from \"./images\";\nimport { infiniteScroll } from \"./pagination\";\n\nconst runOnPageChangeAndLoad = () => {\n  setupToggle();\n  setupLinks();\n  setupImages();\n  addScrollers();\n  infiniteScroll();\n  checkWebP((supports) => {\n    if (!supports) removeWebP();\n  });\n};\n\nconst runOnFirstLoad = () => {\n  if (inIframe()) document.body.classList.add(\"iframed\");\n};\n\nready(() => {\n  runOnFirstLoad();\n  runOnPageChangeAndLoad();\n});\n"]}