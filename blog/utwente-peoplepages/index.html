<!doctype html> <html class="light no-js" lang="en"> <head> <meta charset="utf-8"> <link href="/assets/styles/app.374e776d.css" rel="preload" as="style"> <link href="/assets/scripts/app.0e4467ed.js" rel="preload" as="script"> <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,400i,700|IBM+Plex+Serif:600,500&display=swap" rel="preload" as="style"> <meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name="viewport"> <meta content="IE=edge" http-equiv="X-UA-Compatible"> <title>UTwente PeoplePages Contact Book â€¹ Blog â€¹ Anand Chowdhary</title> <meta content="As a future creative technology student at the University of Twente, I wanted to get in touch with a particular professor. Their website, PeoplePages , uses a RESTful API for AJAX requests to search for university staff, so I decided to add everyone..." name="description"> <meta content="anand chowdhary, anand, chowdhary, oswald labs, people, query, utwente, contacts, https, bytes, search, endpoints, university, results, files, future, decided, letter, access, their, email, Since, empty, searches, space, alphabet, enough, delete, command" name="keywords"> <meta content="Anand Chowdhary" name="author"> <link href="https://anandchowdhary.com/blog/utwente-peoplepages/" rel="canonical"> <meta content="UTwente PeoplePages Contact Book â€¹ Blog â€¹ Anand Chowdhary" property="og:title"> <meta content="article" property="og:type"> <meta content="https://anandchowdhary.com/images/blog/secure-endpoints_ddwwmr.png" property="og:image"> <meta content="https://anandchowdhary.com/blog/utwente-peoplepages/" property="og:url"> <meta content="As a future creative technology student at the University of Twente, I wanted to get in touch with a particular professor. Their website, PeoplePages , uses a RESTful API for AJAX requests to search for university staff, so I decided to add everyone..." property="og:description"> <meta content="en_US" property="og:locale"> <meta content="Anand Chowdhary" property="og:site_name"> <meta content="summary_large_image" name="twitter:card"> <meta content="https://anandchowdhary.com/images/blog/secure-endpoints_ddwwmr.png" name="twitter:image"> <meta content="@AnandChowdhary" name="twitter:creator"> <meta content="@AnandChowdhary" name="twitter:site"> <meta content="https://anandchowdhary.com/blog/utwente-peoplepages/" name="twitter:url"> <meta content="UTwente PeoplePages Contact Book â€¹ Blog â€¹ Anand Chowdhary" name="twitter:title"> <meta content="As a future creative technology student at the University of Twente, I wanted to get in touch with a particular professor. Their website, PeoplePages , uses a RESTful API for AJAX requests to search for university staff, so I decided to add everyone..." name="twitter:description"> <link href="/assets/styles/app.374e776d.css" rel="stylesheet"> <meta content="Eleventy" name="generator"> <link href="https://www.google-analytics.com" rel="preconnect"> <link href="https://anandchowdhary.com" rel="preconnect"> <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:400,400i,700|IBM+Plex+Serif:600,500&display=swap" rel="stylesheet"> <link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180"> <link href="/favicon-32x32.png" rel="icon" type="image/png" sizes="32x32"> <link href="/android-chrome-192x192.png" rel="icon" type="image/png" sizes="192x192"> <link href="/favicon-16x16.png" rel="icon" type="image/png" sizes="16x16"> <link href="/site.webmanifest" rel="manifest"> <link href="/safari-pinned-tab.svg" rel="mask-icon" color="#00aba9"> <meta content="#00aba9" name="msapplication-TileColor"> <meta content="/mstile-144x144.png" name="msapplication-TileImage"> <meta content="#ffffff" name="theme-color"> <link href="https://plus.google.com/+AnandChowdhary0" rel="author"> <link href="https://anandchowdhary.com/feed.xml" rel="alternate" type="application/rss+xml" title="RSS feed"> <link href="https://anandchowdhary.com/feed.json" rel="alternate" type="application/json" title="JSON feed"> <script>document.documentElement.classList.remove("no-js")</script> <script>"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/service-worker.js")})</script> </head> <body class="blog utwente-peoplepages"> <header id="masthead"> <div class="container"> <a href="/" class="logo"> <svg version="1.1" viewbox="0 0 700 700" xmlns="http://www.w3.org/2000/svg"><path d="M176 30c-36 3-61 12-85 27-17 13-30 26-43 47a132 132 0 00-12 25c-9 18-22 67-19 69h87l6-1 2-9a104 104 0 013-11l10-23c8-15 19-25 33-32 12-6 22-7 42-7 29-1 51 8 69 26l10 10a96 96 0 0116 38 221 221 0 01-1 36l-8 24c-7 14-22 28-35 34-8 3-24 6-37 8l-11 1h-13c-10 0-11 0-11 2a2069 2069 0 001 78l15 1a222 222 0 0122 2c14 2 30 7 41 13 30 16 46 47 46 90 0 31-11 59-31 79a97 97 0 01-49 27 168 168 0 01-56-1l-15-5-7-3c-7-3-18-11-25-18-13-14-24-34-28-55l-2-7-46-2H0v3l1 8 4 26a177 177 0 0064 104c30 21 63 33 103 37 17 1 46 0 60-2 17-2 23-3 38-9a181 181 0 00123-135l1-7c2-11 2-18 2-37a178 178 0 00-30-107l55-1h54l1 149v149l6 1h74a50208 50208 0 001-564h31l31 1v300l1 262 40 1h40V28H405v40l1 40h35l34 1v91l-1 92H362l2-4c4-6 11-23 15-32 3-9 5-20 7-32v-50a178 178 0 00-8-34A173 173 0 00239 31c-17-3-46-3-63-1z" fill="currentColor"/></svg> <span>Anand Chowdhary</span> </a> <nav> <a href="/"><span><span class="small-caps">ğŸ‘‹</span> Home</span></a> <a href="/projects/"><span><span class="small-caps">ğŸ’»</span> Projects</span></a> <a href="/blog/" class="active"><span><span class="small-caps">ğŸ“š</span> Blog</span></a> <a href="/events/"><span><span class="small-caps">ğŸ¤</span> Speaking</span></a> <a href="/life/"><span><span class="small-caps">ğŸ§¬</span> Life</span></a> <div id="more"> <a href="#" aria-label="Close"><span><span>&times;</span></span></a> <a href="/about/"><span><span class="small-caps">â„¹ï¸</span> About</span></a> <a href="/press/"><span><span class="small-caps">ğŸ“°</span> Press</span></a> <a href="/mentoring/"><span><span class="small-caps">ğŸ§‘â€ğŸ«</span> Mentoring</span></a> <a href="/videos/"><span><span class="small-caps">ğŸ¥</span> Videos</span></a> <a href="/contact/"><span><span class="small-caps">ğŸ“¨</span> Contact</span></a> </div> <a href="#more" aria-label="More" data-balloon-pos="down"><span>&bullet; &bullet; &bullet;</span></a> </nav> </div> </header> <main id="content" itemscope itemtype="http://schema.org/Article"> <header class="intro s"> <div> <h1 itemprop="name">UTwente PeoplePages Contact Book</h1> <meta content="Anand Chowdhary" itemprop="author"> <meta content="Sat Aug 12 2017 00:00:00 GMT+0000 (Coordinated Universal Time)" itemprop="dateCreated"> <meta content="Sat Aug 12 2017 00:00:00 GMT+0000 (Coordinated Universal Time)" itemprop="datePublished"> <meta content="blog, code, " itemprop="keywords"> <a href="#details" class="show-project-details">Show blog post deÂ­tails</a> <div class="project-intro" id="details"> <dl> <span> <dt>Posted</dt> <dd><time datetime="2017-08-12T00:00:00.000Z">Aug 12, 2017</time></dd> </span> <span> <dt>Tags</dt> <dd><a href="/blog/code/">Code</a></dd> </span> </dl> </div> <a href="#" class="hide-project-details">Hide blog post deÂ­tails</a> </div> </header> <div class="container-outer" itemprop="articleBody"> <p>As a fuÂ­ture creÂ­ative techÂ­nolÂ­ogy stuÂ­dent at the University of Twente, I wanted to get in touch with a parÂ­ticÂ­uÂ­lar proÂ­fesÂ­sor. Their webÂ­site, <a href="https://people.utwente.nl/">PeoplePages</a>, uses a RESTful <span class="small-caps">API</span> for <span class="small-caps">AJAX</span> reÂ­quests to search for uniÂ­verÂ­sity staff, so I deÂ­cided to add everyÂ­one to my conÂ­tacts usÂ­ing <span class="small-caps">API</span> scrapÂ­ing to save time in the fuÂ­ture.</p> <p>I did a query to ï¬nd all reÂ­sults startÂ­ing with the letÂ­ter<span class="push-double"></span> <span class="pull-double">â€œ</span>aâ€ and got a miniÂ­ï¬ed <span class="small-caps">JSON</span> reÂ­sponse with all data. Fortunately, they have unÂ­reÂ­stricted acÂ­cess to their endÂ­points. This is what it looks like when cleaned:</p> <pre><code>GET https://people.utwente.nl/search?query=a
</code></pre> <pre><code class="language-json">{
  <span class="hljs-attr">&quot;data&quot;</span>: [
    {
      <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;person&quot;</span>,
      <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-string">&quot;10000000000XXXX&quot;</span>,
      <span class="hljs-attr">&quot;name&quot;</span>: <span class="hljs-string">&quot;John Doe&quot;</span>,
      <span class="hljs-attr">&quot;jobtitle&quot;</span>: <span class="hljs-string">&quot;Supporting Staff&quot;</span>,
      <span class="hljs-attr">&quot;avatar&quot;</span>: <span class="hljs-string">&quot;https://people.utwente.nl/john.doe/picture.jpg&quot;</span>,
      <span class="hljs-attr">&quot;profile&quot;</span>: <span class="hljs-string">&quot;https://people.utwente.nl/john.doe&quot;</span>,
      <span class="hljs-attr">&quot;organizations&quot;</span>: [
        {
          <span class="hljs-attr">&quot;code&quot;</span>: <span class="hljs-string">&quot;S&amp;B-XXXX&quot;</span>,
          <span class="hljs-attr">&quot;department&quot;</span>: <span class="hljs-string">&quot;S&amp;B&quot;</span>,
          <span class="hljs-attr">&quot;section&quot;</span>: <span class="hljs-string">&quot;XXXX&quot;</span>
        }
      ],
      <span class="hljs-attr">&quot;locations&quot;</span>: [
        {
          <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;Enschede 320&quot;</span>,
          <span class="hljs-attr">&quot;latitude&quot;</span>: <span class="hljs-number">52.23979</span>,
          <span class="hljs-attr">&quot;longitude&quot;</span>: <span class="hljs-number">6.850018</span>
        }
      ],
      <span class="hljs-attr">&quot;phones&quot;</span>: [
        {
          <span class="hljs-attr">&quot;type&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
          <span class="hljs-attr">&quot;tel&quot;</span>: <span class="hljs-string">&quot;+3153489XXXX&quot;</span>,
          <span class="hljs-attr">&quot;prefix&quot;</span>: <span class="hljs-string">&quot;+3153489&quot;</span>,
          <span class="hljs-attr">&quot;ext&quot;</span>: <span class="hljs-string">&quot;XXXX&quot;</span>
        }
      ],
      <span class="hljs-attr">&quot;email&quot;</span>: <span class="hljs-string">&quot;john.doe@utwente.nl&quot;</span>
    }
  ]
}
</code></pre> <p>and so on. Since empty searches, space searches, and othÂ­ers werenâ€™t workÂ­ing, I deÂ­cided to query each letÂ­ter of the alÂ­phaÂ­bet and save the <span class="small-caps">JSON</span> reÂ­sult to play with it:</p> <pre><code class="language-bash">wget https://people.utwente.nl/search?query={a..z}
</code></pre> <p>I soon reÂ­alÂ­ized that this wouldÂ­nâ€™t work beÂ­cause the <span class="small-caps">API</span> reÂ­stricts the numÂ­ber of reÂ­sults to 50, but this would:</p> <pre><code class="language-sh">wget https://people.utwente.nl/search?query={a..z}{a..z}
</code></pre> <p>This goes through every comÂ­biÂ­naÂ­tion in the alÂ­phaÂ­bet: aa, ab, ac&nbsp;.&nbsp;.&nbsp;. zx, zy, zz, and downÂ­loads the <span class="small-caps">JSON</span> ï¬le. This was enough, but in many comÂ­biÂ­naÂ­tions like xx, xz, etc., there were no reÂ­sults, so the empty <span class="small-caps">JSON</span> ï¬le was exÂ­actly 43 bytes with just the <span class="small-caps">JSON</span> strucÂ­ture. I then got rid of those ï¬les:</p> <pre><code class="language-sh">find . -name <span class="hljs-string">&quot;*&quot;</span> -size 43c -delete
</code></pre> <p>This Bash comÂ­mand ï¬nds all ï¬les that are of 43 bytes in size and deletes them. Note that if I just ï¬lÂ­ter the size in bytes and query someÂ­thing like <code>-size 43 -delete</code>, it inÂ­terÂ­prets it as 43*512 bytes, so the <a href="https://superuser.com/a/644274"><span class="small-caps">POSIX</span> reÂ­quireÂ­ment</a> states<span class="push-double"></span> <span class="pull-double">â€œ</span>câ€ for bytes.</p> <p>Finally I conÂ­cateÂ­nated all the <span class="small-caps">JSON</span> ï¬les to one giÂ­ant 4.9 <span class="small-caps">MB</span> ï¬le.</p> <pre><code class="language-sh">cat * &gt; contacts.json
</code></pre> <p>After cleanÂ­ing the ï¬le, reÂ­movÂ­ing busiÂ­ness conÂ­tacts, and genÂ­erÂ­ally playÂ­ing with the <span class="small-caps">JSON</span> conÂ­tent, I have a diÂ­recÂ­tory of 7527 peoÂ­ple inÂ­cludÂ­ing duÂ­pliÂ­cates. Sublime Text can hanÂ­dle this for me, with the simÂ­ple comÂ­mand: Edit -&gt; Permute Lines -&gt; Unique. I now have 3740 peoÂ­ple.</p> <p>Then, I clean up by reÂ­placÂ­ing douÂ­ble space with sinÂ­gle, change the<span class="push-double"></span> <span class="pull-double">â€œ</span>Surname, Firstnameâ€ forÂ­mat to<span class="push-double"></span> <span class="pull-double">â€œ</span>Firstname Surnameâ€, and saved the conÂ­tacts in a <span class="small-caps">CSV</span> ï¬le.</p> <p>I now have the phone numÂ­bers, email adÂ­dresses, and ofÂ­ï¬ce adÂ­dresses of all my proÂ­fesÂ­sors, the Dean, and other imÂ­porÂ­tant conÂ­tacts for the uniÂ­verÂ­sity in my phoneâ€™s conÂ­tact book. Simple enough.</p> <h2 id="security">Security <a href="#security" class="direct-link">#</a></h2> <p>The simÂ­ple way to preÂ­vent this is to have seÂ­cured <span class="small-caps">API</span> endÂ­points. There are many ways to do that â€” toÂ­ken-based auÂ­thenÂ­tiÂ­caÂ­tion for each user with rate limÂ­itÂ­ing, or even <span class="small-caps">CORS</span> preÂ­venÂ­tion.</p> <div class="image"><img alt="Screenshot of Google Search results for 'secure api endpoints'" src="/images/blog/secure-endpoints_ddwwmr.png"></div> <p><strong>Update May 2018:</strong> Since then, the uniÂ­verÂ­sity has upÂ­dated their endÂ­points. You canÂ­not acÂ­cess them by bareÂ­bones <span class="small-caps">HTTP</span> now. The new endÂ­points also seem to have some form of <span class="small-caps">CORS</span> proÂ­tecÂ­tion.</p> </div> </main> <footer id="colophon"> <div class="container"> <nav> <a href="/about/">About</a> <a href="/about/colophon/">Colophon</a> <a href="https://github.com/AnandChowdhary" rel="me">GitHub</a> </nav> <p>&copy; 2008&ndash;2020 <a href="/">Anand Chowdhary</a></p> <p><a href="https://madewithlove.org.in">Made with <span class="small-caps">â¤ï¸</span> in <span class="small-caps">ğŸ‡®ğŸ‡³ğŸ‡³ğŸ‡±ğŸ‡ºğŸ‡¸</span></a></p> </div> </footer> <script src="https://platform-beta.oswaldlabs.com/v1/agastya/load/anand.js" async></script> <script src="https://www.googletagmanager.com/gtag/js?id=UA-39298323-1" async></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-39298323-1")</script> <script src="/assets/scripts/app.0e4467ed.js"></script> <script type="application/ld+json">{"@context":"https://schema.org","@type":"person","name":"Anand Chowdhary","url":"https://anandchowdhary.com","birthDate":"1997-12-29","gender":"Male","nationality":"India","homeLocation":"Enschede, the Netherlands","jobTitle":"Chief Executive Officer","worksFor":{"@type":"Organization","name":"Oswald Labs","alternateName":"Oswald Foundation","url":"https://oswaldlabs.com","logo":"https://static.oswaldlabs.com/oswald-labs-logo.svg","email":"yourfriends@oswaldlabs.com","sameAs":["https://www.facebook.com/OswaldLabs","https://www.twitter.com/OswaldLabs","https://en.wikipedia.org/wiki/Oswald_Labs","https://www.wikidata.org/wiki/Q27593967"]},"sameAs":["https://www.facebook.com/AnandChowdhary","https://www.twitter.com/AnandChowdhary","https://www.linkedin.com/in/AnandChowdhary/","https://plus.google.com/+AnandChowdhary0","https://www.instagram.com/anandchowdhary/","https://www.wikidata.org/wiki/Q33134612"]}</script> </body> </html> 